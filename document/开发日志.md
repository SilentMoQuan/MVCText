## 出现的问题

1. c3p0数据库连接池爆了, 查一下原因
2. 探究rustful风格url在实际开发中的使用
   1. 使用筛选会携带参数
      1. 查询使用的是get请求, url携带参数
      2. 可以带多个
      3. &
3. 重复易懂的语句 和 过长调用语句
   1. xxxUtil 过于相似  思考 接口 / 抽象类	 
4. 批量更新的 sql (思路) 需要更改
   1. 目前的 SQL 只能根据 id 进行统一修改 可以进行单一 记录 的修改
5. 数据使用 前端回传数据  这部分数据由后端进行提供 后端是否进行校验
   1. 学生添加/更新时 与 教室的关系
      1. 使用完全的 学校 年级 班级 信息 会自动查询并使用唯一教室
      2. 更新同理
6. sql 工具类
   1. 通过更换表名来更新不同表的相同功能
   2. 直接定死
7. 调用删除操作, 删除还是定义为不可用 - 不可用, 假删除
   1. 再次添加重复数据, 是解开不可用数据还是直接添加新数据 ------
   2. 对用户来说, 删除就是真正的删除
   3. 假删除只是为了保护数据完整新
8. 配置 log4j2 日志



## 注意

1. mybatis 中动态SQL标签 foreach - mybatis

   1. open close 表示整个循环的 开始结束符号
   2. separator 表示小项之间的分割符号

2. 返回的数据注意是不是列表 - mybatis

3. 多个参数使用 @param("") 显示标注信息名 - MyBatis

   1. 若该对象是一个pojo 使用级联获取属性 

      1. ```xml
         <if test="teacherInfo.schoolName != null &amp;&amp; teacherInfo.schoolName != &quot;&quot;">school_name = #{teacherInfo.schoolName},</if>
         ```

   2. 使用 foreach 标签时 写 @param("") 中规定的名字
   
4. 数据表冗余字段会增加相当大的增删改成本 - mysql

   1. 宽表 设计 
   2. 使用空间 + 增删改成本 换取 查询时间

5. spring事务控制只有在捕获到RuntimeException异常时才会进行事务回滚 - spring

   1. 手动回滚事务 TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();
   2. 手动抛出 RuntimeException异常
   
6. 注意使用 java 多态和泛型 规范代码 简化开发 - java

7. 使用统一的返回格式, 降低沟通成本 - json

8. 索引字段数和索引个数之间的取舍 - mysql

   1. 根据 查询语句 和 实际情况 对索引来进行设计

9. 是否使用外键约束 - mysql

   1. 不使用数据库外键
   2. 使用外键会发生一些未知的错误
   3. 所有的外键约束都由程序进行保证

10. 纯数字字段使用Varchar而不是INT - mysql

    1. varchar可以存储"0"开头的值, int不可以
    2. varchar在长度方面更自由, int固定11
    3. 性能差异较小, 尤其是在有索引的情况下

11. @RequestBody 会将 json 数据封装到一个对象中, 按属性名进行封装 - springmvc

12. 使用高效的sql语句, 而不是复杂的逻辑结构 - mysql

    1. 复杂的逻辑会导致

13. 主键不参与业务 - mysql

14. 表中使用其他表中的信息时, 需要有方法获得唯一记录 - mysql

15. 数据库删除的时候是假删除, 将记录设置为不可用 - mysql

16. 





## 接口文档

- 接口文档
  - 学生接口文档 √
  - 班级接口文档 √
  - 教师接口文档 √



## 模块开发进度

- 学生模块 
  - 空班级学生  √
  - 增删改查 √
  - 批量更改 √
  - 与其他模块的联动 √
    - 教师 学生维护表 √ 
    - 教师和班级 连接起来之后 再将 学生和老师 连接起来 √
- 教师模块
  - 批量添加 √
  - 批量删除 √
  - 批量更改 √
  - 筛选查询 √
  - 模块联动
    - 教师学生维护表
    - 教师班级维护表
- 班级模块
  - 批量添加 √
  - 批量删除 √
  - 批量更改 √
  - 筛选查询 √
  - 联动
    - 教师班级维护表
- 学校模块
  - 批量添加  √
  - 批量删除  √
  - 批量更改  √
  - 筛选查询  √
- 教室模块
  - 批量添加  √
  - 批量删除  √
  - 批量更改  √
  - 筛选查询  √
- 授课信息模块
  - 批量添加  √
  - 批量删除  √
  - 批量更改  √
  - 筛选查询  √
- 班级老师
  - 筛选查询 √
  - 批量添加 √
  - 批量删除 √
- 学生老师
  - 筛选查询  √
  - 批量添加 √
  - 批量删除 √
- 数据库索引重建
  - 根据需要和实际情况



## 学生模块

- 学生
  - 学生 改 班级 学生教师 教室 同步 
- 班级
  - 班级 改 教师 学生同步
  - 班级 改 教室 授课信息  学生 同步
- 教师
  - 教师 改 班级 授课信息 学生 同步
  - 教师 改 课程 授课信息 同步



- 学生 - 教师 关联表 维护
  - 添加学生时 
    - 有 班级 添加班级关联老师与学生 关联表 √	
    - 没有 班级 设置为空 通过更新操作完成关联 √
      - 通过更新关系删除 √ 
      - 通过更新添加 √
    - 独立出来 关联操作 √
  - 更新学生时 
    - 更新关联 √
      - 删除 √
      - 添加 √
  - 删除学生时 √
    - 删除关联 √
  - 独立 关联添加模块 √
  - 独立 关联删除模块 √
  - 明确异常信息 √



- 学生 教室 冗余字段 维护 - 再思考下
  - 学生添加时
    - 空 班 级 校 
    - 完整 班 级 校 
  - 删除时 
    - 跟随学生信息进行删除
  - 更新时
    - 更新 班 || 级 || 校
      - 联系更新
      - 不能反向



## 班级模块

- 新建
  - 直接新建
- 删除
  - 学生班级 置空 √
    - 清空班级信息
  - 班级_教师 关联关系删除 √
    - 对应信息删除
  - 授课信息 删除 √
    - 查询对象对应信息 删除
  - 教室信息 置空 √
    - 查询对应教室信息 置空连接
- 更改
  - 删除添加
    - 先清除各个关系
    - 再添加各个关系
  - 直接更新
    - 更新 学生班级 √
    - 更新 班级_教师 关联关系
      - id 关联 不需要更新
    - 更新授课信息 √
    - 更新教室信息 √
      - 更新教室
        - 将原来的教室置空 √
        - 将新的教室置为当前班号 √

## 教师模块

- 添加
  - 直接添加
- 删除
  - 学生-教师 表 删除 √
  - 授课信息表 删除 √
  - 班级教师表 删除 √
- 更新
  - 授课信息表 更新 √
    - 教师名
    - 课程名
- 根据需要 给 授课信息表添加 教师 id 列
  - 唯一标识
    - 解决无法唯一标识教师的问题
  - 便于更新信息



## 教室模块

- 添加 
  - 直接添加 
- 删除
  - 授课信息表 有关信息 删除
  - 班级 教室号 置空 √
  - 学生 教室号 置空 √
- 更新
  - 教室号不允许被更新, 教室只能换班级
  - 班级表 更新 教室号信息
    - 教室只能
  - 学生更新教室号信息
    - 更新为 ""
    - 更新为新的 教室号 √ 



# 第三次维护

- 授课信息表添加教师 Id 
  - 维护表数据关系
- 教室添加时直接建立关联 or 添加后设置
- 教师添加时直接建立关联 or 添加后设置
- 使用统一的信息类, 防止频繁创建新对象

